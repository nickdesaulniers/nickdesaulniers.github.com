<!doctype html><html xmlns=http://www.w3.org/1999/xhtml xml:lang=en lang=en-us><head><meta charset=utf-8><meta name=viewport content="width=device-width,minimum-scale=1,maximum-scale=1"><link href=/css/fonts.css rel=stylesheet type=text/css><title>Hidden in Plain Sight - Public Key Crypto</title><link rel=stylesheet href=/css/hugo-octopress.css><link rel=stylesheet href=https://nickdesaulniers.github.io/css/custom.css><link rel=stylesheet href=/css/fork-awesome.min.css><link href=https://nickdesaulniers.github.io/favicon.ico rel=icon><meta name=description content><meta name=keywords content><meta name=author content="Nick Desaulniers"><meta name=generator content="Hugo 0.109.0"></head><body><header role=banner><hgroup><h1><a href=https://nickdesaulniers.github.io/>Nick Desaulniers</a></h1><h2>The enemy's gate is down</h2></hgroup></header><nav role=navigation><fieldset class=mobile-nav><select onchange="location=this.value"><option value>Navigate…</option><option value=https://nickdesaulniers.github.io/about/>» About</option><option value=https://nickdesaulniers.github.io/blog/archives/>» Archives</option><option value=https://nickdesaulniers.github.io/>» Blog</option><option value=https://nickdesaulniers.github.io/publications/>» Publications</option><option value=https://nickdesaulniers.github.io/talks/>» Talks</option></select></fieldset><ul class=main-navigation><li><a href=https://nickdesaulniers.github.io/about/ title=About rel="noopener noreferrer">About</a></li><li><a href=https://nickdesaulniers.github.io/blog/archives/ title=Archives rel="noopener noreferrer">Archives</a></li><li><a href=https://nickdesaulniers.github.io/ title=Blog>Blog</a></li><li><a href=https://nickdesaulniers.github.io/publications/ title=Publications rel="noopener noreferrer">Publications</a></li><li><a href=https://nickdesaulniers.github.io/talks/ title=Talks rel="noopener noreferrer">Talks</a></li></ul><ul class=subscription><a href=https://nickdesaulniers.github.io/index.xml target=_blank type=application/rss+xml title=RSS rel="noopener noreferrer"><i class="fa fa-rss-square fa-lg"></i></a></ul><form action=https://www.google.com/search method=get target=_blank rel="noopener noreferrer"><fieldset role=search><input class=search type=text name=q results=0 placeholder=Search>
<input type=hidden name=q value=site:https://nickdesaulniers.github.io/></fieldset></form></nav><div id=main><div id=content><div><article class=hentry role=article><header><p class=meta>Feb 22, 2015
- 8 minute read
- <a href=https://nickdesaulniers.github.io/blog/2015/02/22/public-key-crypto-code-example/#disqus_thread>Comments</a>
- <a class=label href=https://nickdesaulniers.github.io/categories/crypto/>crypto </a><a class=label href=https://nickdesaulniers.github.io/categories/javascript/>javascript </a><a class=label href=https://nickdesaulniers.github.io/categories/security/>security</a></p><h1 class=entry-title>Hidden in Plain Sight - Public Key Crypto</h1></header><div class=entry-content><p>How is it possible for us to communicate securely when there&rsquo;s the possibility
of a third party eavesdropping on us? How can we communicate private secrets
through public channels? How do such techniques enable us to bank online and
carry out other sensitive transactions on the Internet while trusting numerous
relays? In this post, I hope
to explain public key cryptography, with actual code examples, so that the
concepts are a little more concrete.</p><p>First, please check out this excellent video on public key crypto:</p><p>{% youtube YEBfamv-_do %}</p><p>Hopefully that explains the gist of the technique, but what might it actually
look like in code? Let&rsquo;s take a look at example code in JavaScript using the
Node.js crypto module. We&rsquo;ll later compare the upcoming WebCrypto API and
look at a TLS handshake.</p><p>Meet Alice. Meet Bob. Meet Eve. Alice would like to send Bob a secret
message. Alice would not like Eve to view the message. Assume Eve can
intercept, but not tamper with, everything Alice and Bob try to share with each
other.</p><p>Alice chooses a modular exponential key group, such as modp4, then creates a
public and private key.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> group <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;modp4&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> aliceDH <span style=color:#719e07>=</span> crypto.getDiffieHellman(group);
</span></span><span style=display:flex><span>aliceDH.generateKeys();
</span></span></code></pre></div><p>A modular exponential key group is simply a &ldquo;sufficiently large&rdquo; prime number,
paired with a generator (specific number), such as those defined in
<a href=http://tools.ietf.org/html/rfc2412 target=_blank rel=noopener>RFC2412</a> and
<a href=http://tools.ietf.org/html/rfc3526 target=_blank rel=noopener>RFC3526</a>.</p><p>The public key is meant to be shared; it is ok for Eve to know the public key.
The private key must not ever be shared, even with the person communicating to.</p><p>Alice then shares her public key and group with Bob.</p><pre tabindex=0><code>Public Key:
 &lt;Buffer 96 33 c5 9e b9 07 3e f2 ec 56 6d f4 1a b4 f8 4c 77 e6 5f a0 93 cf 32 d3 22 42 c8 b4 7b 2b 1f a9 55 86 05 a4 60 17 ae f9 ee bf b3 c9 05 a9 31 31 94 0f ... &gt;
Group: 
 modp14
</code></pre><p>Bob now creates a public and private key pair with the same group as Alice.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> bobDH <span style=color:#719e07>=</span> crypto.getDiffieHellman(group);
</span></span><span style=display:flex><span>bobDH.generateKeys();
</span></span></code></pre></div><p>Bob shares his public key with Alice.</p><pre tabindex=0><code>Public key:
 &lt;Buffer ee d7 e2 00 e5 82 11 eb 67 ab 50 20 30 81 b1 74 7a 51 0d 7e 2a de b7 df db cf ac 57 de a4 f0 bd bc b5 7e ea df b0 3b c3 3a e2 fa 0e ed 22 90 31 01 67 ... &gt;
</code></pre><p>Alice and Bob now compute a shared secret.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> aliceSecret <span style=color:#719e07>=</span> aliceDH.computeSecret(bobDH.getPublicKey(), <span style=color:#cb4b16>null</span>, <span style=color:#2aa198>&#34;hex&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> bobSecret <span style=color:#719e07>=</span> bobDH.computeSecret(aliceDH.getPublicKey(), <span style=color:#cb4b16>null</span>, <span style=color:#2aa198>&#34;hex&#34;</span>);
</span></span></code></pre></div><p>Alice and Bob have now derived a shared secret from each others&rsquo; public keys.</p><pre tabindex=0><code>aliceSecret === bobSecret; // =&gt; true
</code></pre><p>Meanwhile, Eve has intercepted Alice and Bob&rsquo;s public keys and group. Eve
tries to compute the same secret.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> eveDH <span style=color:#719e07>=</span> crypto.getDiffieHellman(group);
</span></span><span style=display:flex><span>eveDH.generateKeys();
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> eveSecret <span style=color:#719e07>=</span> eveDH.computeSecret(aliceDH.getPublicKeys(), <span style=color:#cb4b16>null</span>, <span style=color:#2aa198>&#34;hex&#34;</span>);
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>eveSecret <span style=color:#719e07>===</span> aliceSecret; <span style=color:#586e75>// =&gt; false
</span></span></span></code></pre></div><p>This is because Alice&rsquo;s secret is derived from Alice and Bob&rsquo;s private keys,
which Eve does not have. Eve may not realize her secret is not the same as
Alice and Bob&rsquo;s until later.</p><p>That was asymmetric encryption; using different keys. The shared secret may
now be used in symmetric encryption; using the same keys.</p><p>Alice creates a symmetric block cypher using her favorite algorithm, a hash of
their secret as a key, and random bytes as an initialization vector.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> cypher <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;aes-256-ctr&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> hash <span style=color:#719e07>=</span> <span style=color:#2aa198>&#34;sha256&#34;</span>;
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> aliceIV <span style=color:#719e07>=</span> crypto.randomBytes(<span style=color:#2aa198>128</span>);
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> aliceHashedSecret <span style=color:#719e07>=</span> crypto.createHash(hash).update(aliceSecret).digest(<span style=color:#2aa198>&#34;binary&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> aliceCypher <span style=color:#719e07>=</span> crypto.createCypher(cypher, aliceHashedSecret, aliceIV);
</span></span></code></pre></div><p>Alice then uses her cypher to encrypt her message to Bob.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> cypherText <span style=color:#719e07>=</span> aliceCypher.update(<span style=color:#2aa198>&#34;...&#34;</span>);
</span></span></code></pre></div><p>Alice then sends the cypher text, cypher, and hash to Bob.</p><pre tabindex=0><code>cypherText:
 &lt;Buffer bd 29 96 83 fa a8 7d 9c ea 90 ab&gt;
cypher:
 aes-256-ctr
hash:
 sha256
</code></pre><p>Bob now constructs a symmetric block cypher using the algorithm from Alice,
and a hash of their shared secret.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> bobHashedSecret <span style=color:#719e07>=</span> crypto.createHash(hash).update(bobSecret).digest(<span style=color:#2aa198>&#34;binary&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> bobCypher <span style=color:#719e07>=</span> crypto.createDecipher(cypher, bobHashedSecret);
</span></span></code></pre></div><p>Bob now decyphers the encrypted message (cypher text) from Alice.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> plainText <span style=color:#719e07>=</span> bobCypher.update(cypherText);
</span></span><span style=display:flex><span>console.log(plainText); <span style=color:#586e75>// =&gt; &#34;I love you&#34;
</span></span></span></code></pre></div><p>Eve has intercepted the cypher text, cypher, hash, and tries to decrypt it.</p><div class=highlight><pre tabindex=0 style=color:#93a1a1;background-color:#002b36;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-javascript data-lang=javascript><span style=display:flex><span><span style=color:#268bd2>var</span> eveHashedSecret <span style=color:#719e07>=</span> crypto.createHash(hash).update(eveSecret).digest(<span style=color:#2aa198>&#34;binary&#34;</span>);
</span></span><span style=display:flex><span><span style=color:#268bd2>var</span> eveCypher <span style=color:#719e07>=</span> crypto.createDecipher(cypher, eveHashedSecret);
</span></span><span style=display:flex><span>console.log(eveCypher.update(cypherText).toString());
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#586e75>// =&gt; ��_r](�i)
</span></span></span></code></pre></div><p>Here&rsquo;s where Eve realizes her secret is not correct.</p><p>This prevents passive eavesdropping, but not active man-in-the-middle (MITM)
attacks. For example, how does Alice know that the messages she was supposedly
receiving from Bob actually came from Bob, not Eve posing as Bob?</p><p>Today, we use a system of certificates to provide authentication. This system
certainly
<a href=http://thenextweb.com/insider/2015/02/19/lenovo-caught-installing-adware-new-computers/ target=_blank rel=noopener>has</a> its
<a href=https://deadbeefsec.wordpress.com/2012/09/30/who-do-you-trust-why-certificate-authorities-are-a-cartel/ target=_blank rel=noopener>flaws</a>,
but it is what we use today. This is more advanced topic that won&rsquo;t be covered
here. Trust is a funny thing.</p><p>What&rsquo;s interesting to note is that the prime and generator used to generate
Diffie-Hellman public and private keys have strings that represent the
corresponding modular key exponential groups, ie &ldquo;modp14&rdquo;. Web crypto&rsquo;s API
gives you
<a href=https://hg.mozilla.org/mozilla-central/file/d866ac7f8606/dom/crypto/test/test_WebCrypto_DH.html#l30 target=_blank rel=noopener>finer grain control</a>
to specify the generator and
<a href=https://hg.mozilla.org/mozilla-central/file/d866ac7f8606/dom/crypto/test/test-vectors.js#l662 target=_blank rel=noopener>large prime number</a>
in a Typed Array. I&rsquo;m not sure why this is; if it allows you to have finer
grain control, or allows you to support newer groups before the implementation
does? To me, it seems like a source for errors to be made; hopefully someone
will make a library to provide these prime/generator pairs.</p><p>One issue with my approach is that I assumed that Alice and Bob both had
support for the same hashing algorithms, modular exponential key group, and
symmetric block cypher. In the real world, this is not always the case.
Instead, it is much more common for the client to broadcast publicly all of the
algorithms it supports, and the server to pick one. This list of algorithms is
called a &ldquo;suite,&rdquo; ie &ldquo;cypher suit.&rdquo; I learned this the hard way recently trying
to
<a href=https://stribika.github.io/2015/01/04/secure-secure-shell.html target=_blank rel=noopener>upgrade</a>
the
<a href=https://wiki.mozilla.org/Security/Guidelines/OpenSSH target=_blank rel=noopener>cypher suit</a>
on my ssh server and finding out that
<a href=https://mochtu.de/2015/01/07/updating-openssh-on-mac-os-x-10-10-yosemite/ target=_blank rel=noopener>my client did not support the lastest cyphers</a>. In this case, Alice and Bob might not have the same
versions of Node.js, which statically link their own versions of OpenSSL. Thus,
one should use <code>cryto.getCiphers()</code> and <code>crypto.getHashes()</code> before assuming
the party they&rsquo;re communicating to can do the math to decrypt. We&rsquo;ll see &ldquo;cypher
suites&rdquo; come up again in TLS handshakes. The NSA
<a href=http://en.wikipedia.org/wiki/NSA_Suite_B_Cryptography target=_blank rel=noopener>publishes a list of endorsed cryptographic components</a>,
for what it&rsquo;s worth. There are also neat tricks we can do to prevent the
message from being decrypted at a later time should the private key be
compromised and encrytped message recorded, called Perfect Forward Secrecy.</p><p>Let&rsquo;s take a look now at how a browser does a TLS handshake. Here&rsquo;s a
capture from Wireshark of me navigating to
<a href=https://google.com target=_blank rel=noopener>https://google.com</a>. First we have a
TLSv1.2 Client Hello to start the handshake. Here we can see a list of the
cypher suites.</p><p><img src=/images/tls_1_client_hello.png alt="tls client hello"></p><p>Next is the response from the server, a TLSv1.2 Server Hello. Here you can see
the server has picked a cypher to use.</p><p><img src=/images/tls_2_server_hello.png alt="tls server hello"></p><p>The server then sends its certificate, which contains a copy of its public key.</p><p><img src=/images/tls_3_server_cert.png alt="tls server cert"></p><p>Now that we&rsquo;ve agreed on a cypher suite, the client now sends its public key.
The server sets up a session, that way it may abbreviate the handshake in the
future. Finally, the client may now start making requests to the server with
encrypted application data.</p><p><img src=/images/tls_4_key_exchange.png alt="tls key exchange"></p><p>For more information on TLS handshakes, you should read
<a href=https://www.igvita.com/ target=_blank rel=noopener>Ilya Grigorik&rsquo;s</a>
High Performance Browser Networking book chapter
<a href=http://chimera.labs.oreilly.com/books/1230000000545/ch04.html#TLS_HANDSHAKE target=_blank rel=noopener>TLS Handshake</a>,
<a href=https://wiki.mozilla.org/Security/Server_Side_TLS#DHE_handshake_and_dhparam target=_blank rel=noopener>Mozilla OpSec&rsquo;s fantastic wiki</a>,
and
<a href=http://security.stackexchange.com/questions/20803/how-does-ssl-tls-work/20833 target=_blank rel=noopener>this exellent Stack Exchange post</a>.
As you might imagine, all of these back and forth trips made during the TLS
handshake add latency overhead when compared to unencrypted HTTP requests.</p><p>I hope this post helped you understand how we can use cryptography to exchange
secret information through public channels. This isn&rsquo;t enough information to
implement a perfectly secure system; end to end security means one single
mistake can compromise the entire system. Peer review and open source,
<a href=https://danielmiessler.com/writing/cryptography_opensource/ target=_blank rel=noopener>battle tested</a>
implementations
<a href=http://dodcio.defense.gov/OpenSourceSoftwareFAQ.aspx#Q%3a_Doesn.27t_hiding_source_code_automatically_make_software_more_secure.3F target=_blank rel=noopener>go a long way</a>.</p><blockquote><p>A cryptosystem should be secure even if everything about the system, except the key, is public knowledge.</p><footer><strong></strong>
<cite>Kerckhoffs's principle</a></cite></footer></blockquote><p>I wanted to write this post because I believe abstinence-only crypto education
isn&rsquo;t working and I cant stand when anyone acts like part of a cabal from their
ivory tower to those trying to learn new things.
Someone will surely cite
<a href=http://matasano.com/articles/javascript-cryptography/ target=_blank rel=noopener>Javascript Cryptography Considered Harmful</a>,
which while valid, misses my point of simply trying to show people more concrete
basics with code examples.
The first crypto system you implement will have its holes, but you
can&rsquo;t go from ignorance of crypto to perfect knowledge without implementing a
few imperfect systems. Don&rsquo;t be afraid to, just don&rsquo;t start with trying to protect
high value data. Crypto is dangerous, because it can be difficult to
impossible to tell when your system fails.
<a href=https://nickdesaulniers.github.io/blog/2014/04/18/lets-write-some-x86-64/ target=_blank rel=noopener>Assembly</a>
is also akin to juggling knives, but at least
you&rsquo;ll usually segfault if you mess up and program execution will halt.</p><p>With upcoming APIs like
<a href=http://www.w3.org/TR/service-workers/#security-considerations target=_blank rel=noopener>Service Workers requiring TLS</a>,
protocols like
<a href=http://http2.github.io/faq/#does-http2-require-encryption target=_blank rel=noopener>HTTP2</a>,
pushes for all
<a href=http://blog.codinghorror.com/should-all-web-traffic-be-encrypted/ target=_blank rel=noopener>web traffic to be encrypted</a>,
and
<a href=https://nickdesaulniers.github.io/blog/2013/07/03/why-ill-be-marching-this-4th/ target=_blank rel=noopener>shitty things governments</a>,
<a href=http://www.theguardian.com/technology/2015/jan/16/david-cameron-encryption-lavabit-ladar-levison target=_blank rel=noopener>politicians</a>,
and
<a href="https://www.youtube.com/watch?v=fpbOEoRrHyU" target=_blank rel=noopener>ISPs</a> do,
web developers are going to have to start boning up on their crypto knowledge.</p><p>What are your recommendations for correctly learning crypto? Leave me some
thoughts in the comments below.</p></div><footer><p class=meta><span class="byline author vcard">Posted by <span class=fn>Nick Desaulniers</span></span>
<time>Feb 22, 2015</time></span></p><p class=meta><a class="basic-alignment left" href=https://nickdesaulniers.github.io/blog/2015/01/25/writing-my-first-book-chapter/ title="Writing My First Technical Book Chapter">Writing My First Technical Book Chapter</a>
<a class="basic-alignment right" href=https://nickdesaulniers.github.io/blog/2015/05/25/interpreter-compiler-jit/ title="Interpreter Compiler JIT">Interpreter Compiler JIT</a></p><div id=disqus_thread></div><script type=application/javascript>window.disqus_config=function(){},function(){if(["localhost","127.0.0.1"].indexOf(window.location.hostname)!=-1){document.getElementById("disqus_thread").innerHTML="Disqus comments not available by default when the website is previewed locally.";return}var t=document,e=t.createElement("script");e.async=!0,e.src="//wangstabill.disqus.com/embed.js",e.setAttribute("data-timestamp",+new Date),(t.head||t.body).appendChild(e)}()</script><noscript>Please enable JavaScript to view the <a href=https://disqus.com/?ref_noscript>comments powered by Disqus.</a></noscript><a href=https://disqus.com class=dsq-brlink>comments powered by <span class=logo-disqus>Disqus</span></a></footer></article></div><aside class="sidebar thirds"><section class="first odd"><p></p></section><ul class=sidebar-nav><li class=sidebar-nav-item><a target=_blank rel="noopener noreferrer" href=https://github.com/nickdesaulniers title=https://github.com/nickdesaulniers><i class="fa fa-github fa-3x"></i></a>
<a target=_blank rel="me noopener noreferrer" href=https://fosstodon.org/@llvm title=https://fosstodon.org/@llvm><i class="fa fa-mastodon fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://www.linkedin.com/in/nick-desaulniers-75520334 title=https://www.linkedin.com/in/nick-desaulniers-75520334><i class="fa fa-linkedin fa-3x"></i></a>
<a target=_blank rel="noopener noreferrer" href=https://www.youtube.com/channel/UC68vgKSuS1Xjg9wpdvShfSQ title=https://www.youtube.com/channel/UC68vgKSuS1Xjg9wpdvShfSQ><i class="fa fa-youtube fa-3x"></i></a></li></ul><section class=even><h1>Recent Posts</h1><ul id=recent_posts><li class=post><a href=/blog/2023/03/10/usps-as-an-isp/>USPS as an ISP</a></li><li class=post><a href=/blog/2023/03/10/disambiguating-arm/>Disambiguating Arm, Arm ARM, ARMv9, ARM9, ARM64, Aarch64, A64, A78, ...</a></li><li class=post><a href=/blog/2023/02/01/forking-is-not-free-the-hidden-costs/>Forking is not free; the hidden costs</a></li><li class=post><a href=/blog/2023/01/27/critical-edge-splitting/>Critical Edge Splitting</a></li></ul></section></aside></div></div><footer role=contentinfo><p>Copyright &copy; 2023 Nick Desaulniers - <a href=https://nickdesaulniers.github.io/license/>License</a> -
<span class=credit>Powered by <a target=_blank href=https://gohugo.io rel="noopener noreferrer">Hugo</a> and <a target=_blank href=https://github.com/parsiya/hugo-octopress/ rel="noopener noreferrer">Hugo-Octopress</a> theme.</p></footer><script>var _gaq=[["_setAccount","UA-36993986-1"],["_trackPageview"]];(function(e,t){var n=e.createElement(t),s=e.getElementsByTagName(t)[0];n.src=("https:"==location.protocol?"//ssl":"//www")+".google-analytics.com/ga.js",s.parentNode.insertBefore(n,s)})(document,"script")</script></body></html>